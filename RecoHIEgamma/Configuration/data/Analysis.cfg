
   include "Configuration/EventContent/data/EventContent.cff"
   include "Configuration/StandardSequences/data/Digi.cff"
   include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
   include "Configuration/StandardSequences/data/FakeConditions.cff"
   include "RecoEgamma/EgammaPhotonProducers/data/photonSequence.cff"

   # Fake running conditions
   include "Configuration/StandardSequences/data/FakeConditions.cff"

   # Geometry
   include "Geometry/CaloEventSetup/data/CaloTopology.cfi"
   include "Configuration/StandardSequences/data/Geometry.cff"
   #es_module = TrackerRecoGeometryESProducer {}

   # Magnetic field
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
   include "Configuration/StandardSequences/data/Simulation.cff"

##################################################################################
   #
   # ECAL and HCAL reconstruction
   #
##################################################################################

   include "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
   include "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
   include "RecoLocalCalo/EcalRecProducers/data/ecalPreshowerRecHit.cfi"
   sequence ecalloc = { ecalWeightUncalibRecHit,
                        ecalRecHit
#                        ecalPreshowerRecHit
   }

   # ECAL clustering
   include "RecoEcal/EgammaClusterProducers/data/islandClusteringSequence.cff"
   include "RecoEcal/EgammaClusterProducers/data/hybridClusteringSequence.cff"
   include "RecoEcal/EgammaClusterProducers/data/preshowerClusteringSequence.cff"
   sequence ecalcst = { islandClusteringSequence,
                        hybridClusteringSequence
#                        preshowerClusteringSequence
   }
   #replace islandBasicClusters.IslandBarrelSeedThr = 1.5
   #replace islandBasicClusters.IslandEndcapSeedThr = 0.5
   #replace islandSuperClusters.seedTransverseEnergyThreshold = 3.0

   # HCAL reconstruction
   include "RecoLocalCalo/Configuration/data/hcalLocalReco.cff"

   sequence caloReco = {ecalloc, ecalcst, hcalLocalRecoSequence } 

   # misc. item
   module dump = EventContentAnalyzer {}

   include "PhysicsTools/HepMCCandAlgos/data/genParticleCandidates.cfi"

   include "RecoHIEgamma/HIPhotonCandidateAna/data/hiphotoncandidateana.cfi"

   replace hIPhotonCandidateAna.GenCandInput="genParticleCandidates"
   #replace hIPhotonCandidateAna.etCut=40
   #replace hIPhotonCandidateAna.output="HIPhotonCand.root"

#
#  Candidate producer
#

   module barrelclusters = EcalCandidateProducer
   {   
      InputTag src = correctedIslandBarrelSuperClusters
      string particleType = "gamma"
   }
   module endcapclusters = EcalCandidateProducer
   {   
      InputTag src = correctedIslandEndcapSuperClusters
      string particleType = "gamma"
   }

    module gammaMatch = MCTruthDeltaRMatcher {
       InputTag src = barrelclusters
       InputTag matched = gammaFilter
       double distMin = 0.15
       vint32 matchedPDGId = { 22 } 
    }

    # HCAL digi change (MBT - next 3 lines)
    #replace simHcalDigis.hbhe.level = -10000
    #replace simHcalDigis.ho.level = -10000 
    #replace simHcalDigis.hf.level = -10000

    # turn of ECAL Selective Readout (MBT - next 3 lines)
    #replace simEcalDigis.srpBarrelLowInterestChannelZS = -1.e9
    #replace simEcalDigis.srpEndcapLowInterestChannelZS = -1.e9


    # HCAL source from simHcalDigis
    replace hbhereco.digiLabel = simHcalDigis
    replace horeco.digiLabel = simHcalDigis
    replace hfreco.digiLabel = simHcalDigis
   
    replace ecalWeightUncalibRecHit.EBdigiCollection =  simEcalDigis:ebDigis
    replace ecalWeightUncalibRecHit.EEdigiCollection =  simEcalDigis:eeDigis

   sequence HIPhoton = { genParticleCandidates,barrelclusters,endcapclusters,hIPhotonCandidateAna}


